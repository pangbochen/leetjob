沉重的FFM模型

典型的工业级别的推荐系统整体架构
- 召回
- 粗排（简单的模型进一步减少后续环节传递的物品）
- 精排（复杂的模型对少量物品精准排序）
- rerank，加上一些业务策略，比如去已读，推荐多样化，广告混排


对于离线的部分，整理离线训练数据，周期性更新模型

FM、FFM一般作为ranking阶段的模型

用FM/FFM模型代替掉左右原先的多路召回模型

## 对于FFM和FM模型

表达成一个抽象的映射函数
$$
y = F(User, Item, Context)
$$
分析出用户对当前产品是否有兴趣，特征领域分为三个自己和

embedding的快速匹配模式进行计算。

我们当前的任务是希望通过FFM模型来做用户任意特征和物品任意特征的组合

对于用户侧的两个特征，我们取出它们分别用于和对应的三个物品侧特征域组合时要用的embedding向量。比如对于U1来说，我们分别将这三个特征embedding称为U11/U12/U13，U11的两个下标数字的含义是：这是第1个用户侧的特征域U1和第1个物品侧特征域I1进行组合时使用的特征embedding。U12则是第1个用户侧的特征域U1和第2个物品侧特征域I2进行组合时使用的特征embedding。如此处理，于是每个用户侧的特征取出三个特征向量，每个物品侧的特征取出两个特征向量。形成上图的结构。

得到简易版本的FFM模型



对于FFM的沉重的定义：
- 比如用户侧有50个特征field
- 物品侧有50个特征field
- 2500的size
- 当K为10时，M*N*K为25000